import{_ as h,r as v,o as f,c as b,b as e,w as n,h as u,t as S,a as k,L as C,M as x,N as F,O as y}from"./index-Cl6wgQ7c.js";/* empty css                  */import{p as w,e as z}from"./server-BONhCzWF.js";const B={name:"monitor-faults",props:{serverId:{type:Number,default:null},limit:{type:Number,default:10}},data(){return{faults:[{id:1,name:"fault1",status:"up"}],page:{current:1,limit:10,total:0}}},watch:{serverId(){this.pageServerFaults()}},mounted(){this.page.limit=this.limit,this.pageServerFaults()},methods:{pageServerFaults(){w(this.serverId,this.page.current,this.page.limit).then(a=>{this.faults=a.list,this.page.total=a.total})},editRemark(a,r){this.$prompt("请输入备注","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"备注不能为空",inputValue:r}).then(({value:i})=>{z(a,i).then(()=>{this.$message({type:"success",message:"修改成功!"}),this.pageServerFaults()}).catch(p=>{this.$message({type:"error",message:"修改失败!"+p})})})},goServer(a){this.$router.push({name:"server",params:{id:a}})}}},E={class:"monitor-faults"},N={"aria-label":"Page navigation example"};function T(a,r,i,p,l,o){const m=v("router-link"),s=C,c=x,g=F,_=y;return f(),b("div",E,[e(g,{data:l.faults,class:"table table-borderless table-hover"},{default:n(()=>[e(s,{prop:"server_name",label:"名称"},{default:n(t=>[e(m,{to:"",onClick:d=>o.goServer(t.row.server_id)},{default:n(()=>[u(S(t.row.server_name),1)]),_:2},1032,["onClick"])]),_:1}),e(s,{prop:"start_time",label:"开始时间"}),e(s,{prop:"end_time",label:"结束时间"}),e(s,{prop:"duration",label:"耗时(秒)"}),e(s,{prop:"remark",label:"备注"}),e(s,{label:"操作"},{default:n(t=>[e(c,{type:"primary",size:"small",onClick:d=>o.editRemark(t.row.id,t.row.remark)},{default:n(()=>[u("修改备注")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),k("nav",N,[e(_,{"page-size":l.page.limit,"onUpdate:pageSize":r[0]||(r[0]=t=>l.page.limit=t),"current-page":l.page.current,"onUpdate:currentPage":r[1]||(r[1]=t=>l.page.current=t),onSizeChange:o.pageServerFaults,onCurrentChange:o.pageServerFaults,layout:"prev, pager, next",total:this.page.total},null,8,["page-size","current-page","onSizeChange","onCurrentChange","total"])])])}const I=h(B,[["render",T]]);export{I as M};
