import{_ as g,y as I,z as N,r as $,o as n,c as a,A as _,w as i,F as v,m as f,h as b,t as p,b as u,n as m,B,C as M,p as V,f as E,a as t,D as F,G as T}from"./index-CbZBdWJW.js";/* empty css                 */const D={name:"FrontendMonitorList",components:{MonitorItem:I},data(){return{activeGroupIds:[1],groups:[],activeServerId:null}},mounted(){this.getMonitorGroups(),this.$bus.on("serverChanged",()=>{this.getMonitorGroups()}),this.$bus.on("serverSelect",e=>{console.log("serverSelect",e),this.activeServerId=e,this.activeServerId&&this.selectGroupByServerId(this.activeServerId)})},methods:{getMonitorGroups(){N().then(e=>{this.groups=e,this.groups.length!==0&&(this.activeGroupIds=this.groups.map(s=>s.group_id))})},selectGroupByServerId(e){for(let s of this.groups)for(let c of s.servers)if(c.serverId===e){this.activeGroupIds=[s.group_id];return}},goServer(e){this.$router.push({name:"server",params:{id:e}})}}},x=e=>(V("data-v-5601e6e9"),e=e(),E(),e),L={class:"monitor-list"},z=x(()=>t("span",{class:"desc",style:{float:"left"}},"30天",-1)),A=x(()=>t("span",{class:"desc",style:{float:"right"}},"today",-1));function U(e,s,c,y,o,h){const l=I,G=$("router-link"),k=B,w=M,C=F;return n(),a("div",L,[o.groups.length>0?(n(),_(w,{key:0,modelValue:o.activeGroupIds,"onUpdate:modelValue":s[0]||(s[0]=r=>o.activeGroupIds=r)},{default:i(()=>[(n(!0),a(v,null,f(o.groups,r=>(n(),_(k,{name:r.group_id},{title:i(()=>[b(p(r.group_name),1)]),default:i(()=>[(n(!0),a(v,null,f(r.servers,d=>(n(),a("div",null,[u(G,{onClick:Z=>h.goServer(d.server_id),to:""},{default:i(()=>[u(l,{width:5,height:16,class:m({active:o.activeServerId==d.server_id}),server:d},{"statistics-bar-after":i(()=>[z,A]),_:2},1032,["class","server"])]),_:2},1032,["onClick"])]))),256))]),_:2},1032,["name"]))),256))]),_:1},8,["modelValue"])):(n(),_(C,{key:1,description:"无服务器列表"}))])}const S=g(D,[["render",U],["__scopeId","data-v-5601e6e9"]]),j={name:"index",components:{FrontendMonitorList:S},data(){return{total:{onlineNum:0,offlineNum:0}}},mounted(){this.dashboardTotal()},methods:{dashboardTotal(){T().then(e=>{this.total=e})}}},q={class:"home container mt-3"},H=t("h1",{class:"mb-3"},"状态速览",-1),J={class:"shadow-box big-padding text-center mb-4"},K={class:"row"},O={class:"col"},P=t("h3",null,"在线",-1),Q={class:"col"},R=t("h3",null,"离线",-1),W={class:"shadow-box mb-3"},X=t("footer",{class:"text-center m-5"},[b(" 开源："),t("a",{href:"https://github.com/imblowsnow/server-monitor"},"server-monitor")],-1);function Y(e,s,c,y,o,h){const l=S;return n(),a("div",q,[H,t("div",J,[t("div",K,[t("div",O,[P,t("span",{class:m(["num",o.total.onlineNum===0&&"text-secondary"])},p(o.total.onlineNum),3)]),t("div",Q,[R,t("span",{class:m(["num",o.total.offlineNum>0?"text-danger":"text-secondary"])},p(o.total.offlineNum),3)])])]),t("div",W,[u(l)]),X])}const oe=g(j,[["render",Y]]);export{oe as default};
