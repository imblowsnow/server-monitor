import{_ as v,y as f,z as N,o as n,c as a,b as d,w as i,F as h,m,A as w,h as y,t as _,n as p,B as $,C as B,p as M,f as C,a as t,D as V}from"./index-Drs-in-b.js";const F={name:"FrontendMonitorList",components:{MonitorItem:f},data(){return{activeGroupIds:[1],groups:[],activeServerId:null}},mounted(){this.getMonitorGroups(),this.$bus.on("serverChanged",()=>{this.getMonitorGroups()}),this.$bus.on("serverSelect",e=>{console.log("serverSelect",e),this.activeServerId=e,this.activeServerId&&this.selectGroupByServerId(this.activeServerId)})},methods:{getMonitorGroups(){N().then(e=>{this.groups=e,this.groups.length!==0&&(this.activeGroupIds=this.groups.map(o=>o.group_id))})},selectGroupByServerId(e){for(let o of this.groups)for(let c of o.servers)if(c.serverId===e){this.activeGroupIds=[o.group_id];return}}}},g=e=>(M("data-v-5a36616d"),e=e(),C(),e),T={class:"monitor-list"},k=g(()=>t("span",{class:"desc",style:{float:"left"}},"24小时",-1)),D=g(()=>t("span",{class:"desc",style:{float:"right"}},"now",-1));function E(e,o,c,I,s,b){const l=f,S=$,G=B;return n(),a("div",T,[d(G,{modelValue:s.activeGroupIds,"onUpdate:modelValue":o[0]||(o[0]=r=>s.activeGroupIds=r)},{default:i(()=>[(n(!0),a(h,null,m(s.groups,r=>(n(),w(S,{name:r.group_id},{title:i(()=>[y(_(r.group_name),1)]),default:i(()=>[(n(!0),a(h,null,m(r.servers,u=>(n(),a("div",null,[d(l,{width:5,height:16,class:p({active:s.activeServerId==u.server_id}),server:u},{"statistics-bar-after":i(()=>[k,D]),_:2},1032,["class","server"])]))),256))]),_:2},1032,["name"]))),256))]),_:1},8,["modelValue"])])}const x=v(F,[["render",E],["__scopeId","data-v-5a36616d"]]),L={name:"index",components:{FrontendMonitorList:x},data(){return{total:{onlineNum:0,offlineNum:0}}},mounted(){this.dashboardTotal()},methods:{dashboardTotal(){V().then(e=>{this.total=e})}}},z={class:"home container mt-3"},A=t("h1",{class:"mb-3"},"状态速览",-1),U={class:"shadow-box big-padding text-center mb-4"},j={class:"row"},q={class:"col"},H=t("h3",null,"在线",-1),J={class:"col"},K=t("h3",null,"离线",-1),O={class:"shadow-box mb-3"},P=t("footer",{class:"text-center m-5"}," 技术支持：xxx ",-1);function Q(e,o,c,I,s,b){const l=x;return n(),a("div",z,[A,t("div",U,[t("div",j,[t("div",q,[H,t("span",{class:p(["num",s.total.onlineNum===0&&"text-secondary"])},_(s.total.onlineNum),3)]),t("div",J,[K,t("span",{class:p(["num",s.total.offlineNum>0?"text-danger":"text-secondary"])},_(s.total.offlineNum),3)])])]),t("div",O,[d(l)]),P])}const W=v(L,[["render",Q]]);export{W as default};
