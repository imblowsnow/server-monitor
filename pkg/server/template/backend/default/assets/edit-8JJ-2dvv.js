import{g as c}from"./server_group-C9Tlw9iT.js";import{c as p,u as _}from"./server-BUvKMUBp.js";import{_ as h,o as a,c as d,a as e,k as l,l as u,F as x,m as f,v as n,t as v}from"./index-CSaXPy_7.js";const b={data(){return{groups:[],form:{groupId:1,name:"",remark:"",sort:1},id:null}},mounted(){this.getGroups();let r=this.$route.params.id;r||(this.$message.error("服务器ID不能为空!"),this.$router.push("/server")),this.id=r,this.getServer(this.id)},methods:{getGroups(){c().then(r=>{this.groups=r}).catch(()=>{this.$message.error("获取分组失败!")})},getServer(r){p(r).then(s=>{this.form=s}).catch(()=>{this.$message.error("获取服务器失败!")})},updateServer(){_(this.id,this.form).then(r=>{this.$bus.emit("serverChanged"),this.$router.push({name:"server",params:{id:this.id}})}).catch(r=>{this.$message.error("更新失败!"+r)})},generateKey(){this.form.key=this.generateUUID()},generateUUID(){return"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var s=Math.random()*16|0,m=r==="x"?s:s&3|8;return m.toString(16)})}}},g={class:"server-add"},y=e("h1",{class:"mb-3"},"编辑服务器",-1),k={class:"shadow-box big-padding"},S={class:"row"},U={class:"col-md-6"},V={class:"mb-3"},w=e("label",{class:"form-label"},"服务器分组",-1),q={class:"input-group"},D=["value"],I={class:"mb-3"},B=e("label",{class:"form-label"},"服务器名称",-1),C={class:"mb-3"},G=e("label",{class:"form-label"},"服务器备注信息",-1),K={class:"col-md-6"},M={class:"mb-3"},F=e("label",{class:"form-label"},"排序",-1),E={class:"mb-3"},L=e("label",{class:"form-label"},"首页展示",-1),N=e("option",{value:1},"展示",-1),T=e("option",{value:10},"不展示",-1),j=[N,T],z={class:"mb-3"},A=e("label",{class:"form-label"},"秘钥",-1),H={class:"input-group"},J={class:"row"};function O(r,s,m,P,t,i){return a(),d("div",g,[y,e("div",k,[e("form",null,[e("div",S,[e("div",U,[e("div",V,[w,e("div",q,[l(e("select",{class:"form-control","onUpdate:modelValue":s[0]||(s[0]=o=>t.form.group_id=o),required:""},[(a(!0),d(x,null,f(t.groups,o=>(a(),d("option",{value:o.id},v(o.group_name),9,D))),256))],512),[[u,t.form.group_id]])])]),e("div",I,[B,l(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=o=>t.form.name=o),required:""},null,512),[[n,t.form.name]])]),e("div",C,[G,l(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[2]||(s[2]=o=>t.form.remark=o),required:""},null,512),[[n,t.form.remark]])])]),e("div",K,[e("div",M,[F,l(e("input",{type:"number",class:"form-control","onUpdate:modelValue":s[3]||(s[3]=o=>t.form.sort=o),min:"0",required:""},null,512),[[n,t.form.sort]])]),e("div",E,[L,l(e("select",{class:"form-control","onUpdate:modelValue":s[4]||(s[4]=o=>t.form.show_index=o)},j,512),[[u,t.form.show_index]])]),e("div",z,[A,e("div",H,[l(e("input",{class:"form-control","onUpdate:modelValue":s[5]||(s[5]=o=>t.form.key=o),required:"",disabled:""},null,512),[[n,t.form.key]]),e("button",{type:"button",class:"btn btn-primary","aria-label":"open modal to ",onClick:s[6]||(s[6]=(...o)=>i.generateKey&&i.generateKey(...o))}," 重新生成 ")])])])]),e("div",J,[e("button",{type:"button",class:"btn btn-primary",onClick:s[7]||(s[7]=(...o)=>i.updateServer&&i.updateServer(...o))},"保存")])])])])}const X=h(b,[["render",O]]);export{X as default};
